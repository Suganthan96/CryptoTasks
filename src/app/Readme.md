# CryptoTasks App Directory Documentation

This document provides a comprehensive overview of the `src/app` directory in the CryptoTasks project. It details the purpose, structure, and logic of each file and folder, serving as a guide for developers and contributors.

---

## Overview

The `src/app` directory is the heart of the CryptoTasks web application, built with Next.js and React. It contains all the UI pages, API endpoints, reusable components, and supporting files required for the platform, which connects clients and freelancers for on-chain hiring and project management.

---

## Folder & File Structure

### agent/
- **agent.py**: Python backend logic for the "Scout Agent". This may handle AI-driven automation, proposal generation, or other backend tasks.
- **page.tsx**: The main React page for the agent interface. Handles:
  - User input for project details or commands.
  - Interactions with the Scout Agent (possibly via API or direct Python integration).
  - Sending project proposals to freelancers.
  - Displaying chat-like interactions between the user and the agent.

### api/
Contains Next.js API route handlers for server-side logic.
- **scout/route.ts**: Handles POST requests for scouting freelancers. Likely uses AI or search logic to match clients with suitable freelancers based on project requirements.
- **send-proposal/route.ts**: Handles POST requests to send project proposals. Receives `from`, `to`, and `text` fields, and writes proposals/messages to the Supabase `messages` table. Ensures proposals are delivered to the correct freelancer wallet.

### chat/
- **ChatBox.tsx**: The main chat UI component. Features:
  - Real-time chat between clients and freelancers.
  - Displays project proposals, regular messages, and system notifications.
  - Handles message sending, chat history retrieval, and live updates via Supabase subscriptions.
  - Adapts UI for both client and freelancer roles.
- **page.tsx**: The main page for the `/chat` route. Renders the `ChatBox` component and manages routing logic for chat sessions.

### components/
Reusable UI and logic components used throughout the app.
- **ClientProviders.tsx**: Wraps the app with context providers (e.g., authentication, wallet connection, global state). Ensures all child components have access to necessary context.
- **Navbar.tsx**: The top navigation bar. Includes:
  - App branding.
  - Navigation links to Freelancers, Agent, Profile, and Chat pages.
  - Handles navigation logic (e.g., routing to chat without pop-ups).
- **SendMessageButton.tsx**: A button component for sending messages in chat. May include loading states, icons, or accessibility features.

### freelancers/
- **data.ts**: Contains a list of freelancer profiles, including names, wallet addresses, skills, and other metadata. Used for search, display, and proposal targeting.
- **page.tsx**: The main page listing all freelancers. Features:
  - Search and filter functionality.
  - Displays freelancer cards with details and actions (e.g., send proposal, view profile).

### profile/
- **page.tsx**: The user profile page. Displays and allows editing of user information, such as wallet address, bio, and project history.

### app-level files
- **globals.css**: Global CSS styles applied throughout the app. Defines color schemes, typography, layout, and resets.
- **layout.tsx**: The root layout component. Wraps all pages, providing consistent structure (e.g., Navbar, providers, global modals).
- **page.tsx**: The main landing page. Handles:
  - App introduction and branding.
  - Login and wallet connection (via RainbowKit/Wagmi).
  - Role selection (Client or Freelancer) and navigation to the appropriate workflow.
- **favicon.ico**: The app's favicon, shown in browser tabs.
- **Readme.md**: (This file) Documentation for the app folder.

---

## Application Flow

1. **Landing Page (`page.tsx`)**
   - User is greeted with branding and a choice to connect as a Client or Freelancer.
   - Upon connection, user is routed to the appropriate dashboard (Freelancers list or Agent interface).

2. **Freelancer Discovery (`freelancers/page.tsx`)**
   - Clients can browse, search, and select freelancers.
   - Selecting a freelancer opens a chat session for direct communication and proposal sending.

3. **Chat (`chat/ChatBox.tsx`, `chat/page.tsx`)**
   - Real-time chat between clients and freelancers.
   - Project proposals are sent as special messages and displayed with unique styling.
   - Chat history is loaded from Supabase, and new messages are received live.

4. **Agent Automation (`agent/page.tsx`)**
   - The Scout Agent can automate proposal generation, answer questions, or assist with project setup.
   - Proposals generated by the agent are sent directly to freelancers via the chat system.

5. **Profile Management (`profile/page.tsx`)**
   - Users can view and edit their profile, including wallet address and project history.

6. **Navigation (`components/Navbar.tsx`)**
   - Users can navigate between Freelancers, Agent, Profile, and Chat at any time.

---

## Data Flow & State Management
- **Wallet Connection**: Managed via Wagmi and RainbowKit, providing secure on-chain authentication.
- **Chat & Proposals**: Messages are stored and retrieved from Supabase. Real-time updates are handled via Supabase subscriptions.
- **Role Management**: The user's role (client or freelancer) is determined at login and passed as a prop to relevant components.
- **Context Providers**: Global state and context (e.g., user info, wallet, theme) are provided via `ClientProviders.tsx`.

---

## Styling
- **globals.css**: Defines the color palette (dark mode, accent colors), font styles, and layout utilities.
- **Component Styles**: Most components use Tailwind CSS classes for rapid, consistent styling.

---

## Extending the App
- **Adding New Pages**: Create a new folder with a `page.tsx` file for each new route.
- **Adding API Endpoints**: Add new folders/files under `api/` with a `route.ts` file for each endpoint.
- **Adding Components**: Place reusable UI or logic in the `components/` folder.
- **Modifying Data Models**: Update Supabase tables and TypeScript interfaces as needed for new features.

---

## Summary
The `src/app` directory is organized for clarity, scalability, and rapid development. Each folder and file has a clear responsibility, and the flow between pages, components, and APIs is designed for a seamless user and developer experience. Use this document as a reference for onboarding, development, and extending the CryptoTasks platform.
